---
layout: default
title:  "Cocoapods"
date:   2022-12-20 10:55:07 +0800
categories: jekyll update
---

<p>新建一个cocopods lib后需要对项目做出一些调整:</p>
<p>1.在.podspec文件中将s.source的https改为git@。</p>
<p>2.在.podspec文件中添加<code>s.pod_target_xcconfig = { 'VALID_ARCHS' => 'x86_64 armv7 arm64' , 'EXCLUDED_ARCHS[sdk=iphonesimulator*]' => 'arm64' , 'OTHER_LINKER_FLAGS' => '$(inherited)'}</code>，当然以上只是一个示例，添加你需要的一些配置，这里只会将当前.podspec中的spec及subspec修改为以上配置,而不会影响spec和subspec的dependency的其他库，dependency的其他库由它们库本身的.podspec决定。</p>
<>3.在podfile中添加source "https://github.com/CocoaPods/Specs.git"及source 'git@github.com:DDIsFriend/DDSpecs.git'（此为你自己的specs）。</p>
<p>4.podfile中可以添加:</p>
    post_install do |installer|
      installer.pods_project.build_configurations.each do |config|
        config.build_settings["EXCLUDED_ARCHS[sdk=iphonesimulator*]"] = "arm64"
        config.build_settings["OTHER_LINKER_FLAGS"] = "$(inherited)"
      end
    end
<p>来修改pods的配置,podfile中添加以上语句会将podfile中所有的pod库都改为以上的配置。</p>
<p> 5.在xcworkspace的xcshareddata中添加IDETemplateMacros.plist，就是文件的创建信息，例如:</p>
    //    Cocoapods.h
    //    DDDiary
    //    Created by DDIsFriend on 2022/10/31.
    
<p>6.准备提交版本前先pod lib lint（此时可能需要跟--allow-warnings --sources --use-library等依赖）。</p>
<p>7.pod lib lint成功后，需要git tag当前版本至远程，然后再pod repo push（此时可能需要跟--allow-warnings --sources --use-library等依赖）。</p>
<p>8..pod库有些是红圈，有些是房子，有些是公文包，其中房子和公文包是确定的，一个是静态库，一个是动态库，但是红圈的原因暂不清楚，唯一能发现的是红圈都是在build setting中未包含apple clang的。</p>

